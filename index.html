<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script  src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <title>Whack A don!</title>
  <link href='https://fonts.googleapis.com/css?family=Amatic+SC:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="main.css">
</head>
<body>

  <h1>Whack-a-don! <span class="score">0</span></h1>
  <button onClick="startGame()">Start!</button>

  <div class="impeach">
  </div>

  <div class ="bernie">
    <!-- <audio controls autoplay>
  <source src="https://audio.blerp.com/audio/1d37b690-b537-11e9-913e-39b24160e11b?type=MP3" type="audio/mpeg">
  <source src="https://audio.blerp.com/audio/1d37b690-b537-11e9-913e-39b24160e11b?type=ogg" type="audio/ogg"> -->
  </audio>
  </div>

  <div class="game">


    <div class="noTrump noTrump1">
      <div class="don"></div>
    </div>

    <div class="noTrump noTrump2">
      <div class="don"></div>
    </div>

    <div class="noTrump noTrump3">
      <div class="don"></div>
    </div>

    <div class="noTrump noTrump4">
      <div class="don"></div>
    </div>

    <div class="noTrump noTrump5">
      <div class="don"></div>
      </div>

    <div class="noTrump noTrump6">
      <div class="don"></div>
     </div>

    <div class="noTrump noTrump7">
      <div class="don"></div>
      </div>

    <div class="noTrump noTrump8">
      <div class="don"></div>
     </div>

    <div class="noTrump noTrump9">
      <div class="don"></div>
     </div>

     <div class="noTrump noTrump10">
       <div class="don"></div>
      </div>

      <div class="noTrump noTrump11">
        <div class="don"></div>
       </div>

      <div class="noTrump noTrump12">
         <div class="don"></div>
        </div>

      <div class="noTrump noTrump13">
        <div class="don"></div>
       </div>

      <div class="noTrump noTrump14">
        <div class="don"></div>
        </div>

      <div class="noTrump noTrump15">
        <div class="don"></div>
       </div>
  </div>


<script>
  const noTrumps = document.querySelectorAll('.noTrump');
  const scoreBoard = document.querySelector('.score');
  const dons = document.querySelectorAll('.don');
  let lastTrump;
  let timeUp = false;
  let score = 0;
  let gameStarted = false;

  function randomTime(min, max) {
    return Math.round(Math.random() * (max - min) + min)
    ;
  }

  function randomDon(noTrumps){
    const idx = Math.floor(Math.random() * noTrumps.length);
    const noTrump = noTrumps[idx];
    if (noTrump === lastTrump){
      return randomDon(noTrumps);
    }



    lastTrump = noTrump;
    return noTrump;
  }

  function pop(){
    const time = randomTime(400,800);
    const noTrump = randomDon(noTrumps);
    noTrump.classList.add('up');
    setTimeout(()=>{
      noTrump.classList.remove('up');
    if (!timeUp) pop();
    }, time);
  }

function startGame() {
  if(gameStarted==false) {
    $('.impeach').hide();
    scoreBoard.textContent = 0;
    gameStarted=true;
    timeUp = false;
    score= 0;
    pop();
    setTimeout(()=> timeUp = true, 15000)
  }

}

function hitDon(e) {
  // if(!e.isTrusted) return;
  score++;
  this.classList.remove('up');
  scoreBoard.textContent = score;
  if(score ==7){
    $('.impeach').show();
    gameStarted = false;
    setTimeout(()=> $('.impeach').hide(), 5000)
  }
  if(score ==10){
    $('.bernie').show();
    gameStarted = false;
    setTimeout(()=> $('.bernie').hide(), 5000)
    

  }



  }




// function impeachment(){
//   if (scoreBoard => 10)
//   document.getElementById("impeach").style.display = ".impeach";


// }

dons.forEach(don => don.addEventListener('click', hitDon));

</script>
</body>
</html>
